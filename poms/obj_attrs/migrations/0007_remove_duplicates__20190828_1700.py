# -*- coding: utf-8 -*-
# Generated by Django 1.10.7 on 2019-08-28 17:00
from __future__ import unicode_literals

from django.db import migrations


def remove_duplicates(apps, schema_editor):
    print('remove_duplicates here')

    GenericAttribute = apps.get_model("obj_attrs", "GenericAttribute")

    for item in GenericAttribute.objects.all():
        if GenericAttribute.objects.filter(object_id=item.object_id, attribute_type=item.attribute_type,
                                           content_type=item.content_type).count() > 1:
            item.delete()


def rev(apps, schema_editor):
    # the reverse goes here if you want to copy company names into customer again if you migrate backwards.
    pass


class Migration(migrations.Migration):
    dependencies = [
        ('obj_attrs', '0006_auto_20190828_1520'),
    ]

    operations = [
        migrations.RunPython(remove_duplicates, rev)
    ]
